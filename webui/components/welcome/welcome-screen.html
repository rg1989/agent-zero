<html>

<head>
    <script type="module">
        import { store } from "/components/welcome/welcome-store.js";
    </script>
</head>

<body>
    <div x-data >
        <template x-if="$store.welcomeStore && $store.welcomeStore.isVisible">
            <div x-create="$store.welcomeStore.onCreate()" class="welcome-container">
                <div class="welcome-content">
                    <!-- Action Cards -->
                    <div class="welcome-actions">
                        <div class="welcome-action-card" @click="$store.welcomeStore.executeAction('new-chat')"
                             x-data="{ hoverColor: '' }" @mouseenter="hoverColor = globalThis.getRandomNeonColor()" @mouseleave="hoverColor = ''"
                             :style="hoverColor ? `border-color: ${hoverColor}; background: var(--color-message-bg); box-shadow: 0 0 15px ${hoverColor}40; transform: translateY(-2px);` : ''">
                            <span class="material-symbols-outlined welcome-action-icon" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">add_circle</span>
                            <h3 class="welcome-action-title" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">New Chat</h3>
                        </div>

                        <div class="welcome-action-card" @click="$store.welcomeStore.executeAction('projects')"
                             x-data="{ hoverColor: '' }" @mouseenter="hoverColor = globalThis.getRandomNeonColor()" @mouseleave="hoverColor = ''"
                             :style="hoverColor ? `border-color: ${hoverColor}; background: var(--color-message-bg); box-shadow: 0 0 15px ${hoverColor}40; transform: translateY(-2px);` : ''">
                            <span class="material-symbols-outlined welcome-action-icon" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">folder</span>
                            <h3 class="welcome-action-title" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">Projects</h3>
                        </div>
                        <div class="welcome-action-card" @click="$store.welcomeStore.executeAction('memory')"
                             x-data="{ hoverColor: '' }" @mouseenter="hoverColor = globalThis.getRandomNeonColor()" @mouseleave="hoverColor = ''"
                             :style="hoverColor ? `border-color: ${hoverColor}; background: var(--color-message-bg); box-shadow: 0 0 15px ${hoverColor}40; transform: translateY(-2px);` : ''">
                            <span class="material-symbols-outlined welcome-action-icon" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">memory</span>
                            <h3 class="welcome-action-title" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">Memory</h3>
                        </div>

                        <div class="welcome-action-card" @click="$store.welcomeStore.executeAction('scheduler')"
                             x-data="{ hoverColor: '' }" @mouseenter="hoverColor = globalThis.getRandomNeonColor()" @mouseleave="hoverColor = ''"
                             :style="hoverColor ? `border-color: ${hoverColor}; background: var(--color-message-bg); box-shadow: 0 0 15px ${hoverColor}40; transform: translateY(-2px);` : ''">
                            <span class="material-symbols-outlined welcome-action-icon" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">schedule</span>
                            <h3 class="welcome-action-title" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">Scheduler</h3>
                        </div>
                        <div class="welcome-action-card" @click="$store.welcomeStore.executeAction('settings')"
                             x-data="{ hoverColor: '' }" @mouseenter="hoverColor = globalThis.getRandomNeonColor()" @mouseleave="hoverColor = ''"
                             :style="hoverColor ? `border-color: ${hoverColor}; background: var(--color-message-bg); box-shadow: 0 0 15px ${hoverColor}40; transform: translateY(-2px);` : ''">
                            <span class="material-symbols-outlined welcome-action-icon" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">settings</span>
                            <h3 class="welcome-action-title" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">Settings</h3>
                        </div>

                        <div class="welcome-action-card" @click="$store.welcomeStore.executeAction('files')"
                             x-data="{ hoverColor: '' }" @mouseenter="hoverColor = globalThis.getRandomNeonColor()" @mouseleave="hoverColor = ''"
                             :style="hoverColor ? `border-color: ${hoverColor}; background: var(--color-message-bg); box-shadow: 0 0 15px ${hoverColor}40; transform: translateY(-2px);` : ''">
                            <span class="material-symbols-outlined welcome-action-icon" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">folder_open</span>
                            <h3 class="welcome-action-title" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">Files</h3>
                        </div>
                        <div class="welcome-action-card" @click="$store.welcomeStore.executeAction('apps')"
                             x-data="{ hoverColor: '' }" @mouseenter="hoverColor = globalThis.getRandomNeonColor()" @mouseleave="hoverColor = ''"
                             :style="hoverColor ? `border-color: ${hoverColor}; background: var(--color-message-bg); box-shadow: 0 0 15px ${hoverColor}40; transform: translateY(-2px);` : ''">
                            <span class="material-symbols-outlined welcome-action-icon" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">web</span>
                            <h3 class="welcome-action-title" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">My Apps</h3>
                        </div>
                        <div class="welcome-action-card" @click="$store.welcomeStore.executeAction('github')"
                             x-data="{ hoverColor: '' }" @mouseenter="hoverColor = globalThis.getRandomNeonColor()" @mouseleave="hoverColor = ''"
                             :style="hoverColor ? `border-color: ${hoverColor}; background: var(--color-message-bg); box-shadow: 0 0 15px ${hoverColor}40; transform: translateY(-2px);` : ''">
                            <span class="material-symbols-outlined welcome-action-icon" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">code</span>
                            <h3 class="welcome-action-title" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">Visit GitHub</h3>
                        </div>
                    </div>

                    <div class="welcome-actions-footer">
                        <button type="button"
                                class="welcome-refresh-button"
                                x-data="{ hoverColor: '' }" @mouseenter="hoverColor = globalThis.getRandomNeonColor()" @mouseleave="hoverColor = ''"
                                :style="hoverColor ? `border-color: ${hoverColor}; background: var(--color-message-bg); box-shadow: 0 0 15px ${hoverColor}40;` : ''"
                                @click="$store.welcomeStore.refreshBanners(true)"
                                :disabled="$store.welcomeStore.bannersLoading"
                                title="Refresh banners">
                            <span class="material-symbols-outlined" :class="{ 'welcome-spin': $store.welcomeStore.bannersLoading }" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">refresh</span>
                        </button>

                        <button type="button"
                                class="welcome-refresh-button"
                                x-data="{ hoverColor: '' }" @mouseenter="hoverColor = globalThis.getRandomNeonColor()" @mouseleave="hoverColor = ''"
                                :style="hoverColor ? `border-color: ${hoverColor}; background: var(--color-message-bg); box-shadow: 0 0 15px ${hoverColor}40;` : ''"
                                @click="$store.welcomeStore.undismissBanners()"
                                x-show="$store.welcomeStore.hasDismissedBanners"
                                :disabled="$store.welcomeStore.bannersLoading"
                                title="Undismiss all banners">
                            <span class="material-symbols-outlined" :style="hoverColor ? `color: ${hoverColor}; text-shadow: 0 0 8px ${hoverColor};` : ''">undo</span>
                        </button>
                    </div>

                    <!-- Banner Section -->
                    <div class="welcome-banners" x-show="$store.welcomeStore.banners && $store.welcomeStore.banners.length > 0">
                        <template x-for="banner in $store.welcomeStore.sortedBanners" :key="banner.id">
                            <div class="welcome-banner" :class="$store.welcomeStore.getBannerClass(banner.type)">
                                <!-- Banner Icon -->
                                <div class="welcome-banner-icon">
                                    <span class="material-symbols-outlined" x-text="$store.welcomeStore.getBannerIcon(banner.type)"></span>
                                </div>
                                
                                <!-- Banner Content -->
                                <div class="welcome-banner-content">
                                    <div class="welcome-banner-title" x-text="banner.title"></div>
                                    <div class="welcome-banner-html" x-html="banner.html"></div>
                                </div>
                                
                                <!-- Dismiss Button -->
                                <button class="welcome-banner-dismiss" 
                                        x-show="banner.dismissible !== false"
                                        @click.stop="$store.welcomeStore.dismissBanner(banner.id)"
                                        title="Dismiss">
                                    <span class="material-symbols-outlined">close</span>
                                </button>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </template>
    </div>

    <style>
        /* Welcome Screen Styles */
        .welcome-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3%;
            text-align: center;
            background: var(--color-background);
            color: var(--color-text);
            min-height: 100vh;
            position: relative;
            overflow: hidden;
        }

        .welcome-container::before {
            content: "";
            position: absolute;
            inset: 0;
            background-image: url("./public/darkSymbol.svg");
            background-repeat: no-repeat;
            background-position: center;
            background-size: 80% auto;
            opacity: 0.07;
            pointer-events: none;
        }

        .light-mode .welcome-container::before {
            filter: invert(0.55);
            opacity: 0.06;
        }

        .dark-mode .welcome-container::before {
            filter: invert(0.85);
            opacity: 0.08;
        }

        .welcome-content {
            position: relative;
            z-index: 1;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Welcome container styles */
        .welcome-logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .welcome-logo {
            width: 7rem;
            height: 7rem;
        }

        /* Themes adjustments for logo */
        .light-mode .welcome-logo {
            filter: invert(0.5);
        }

        .dark-mode .welcome-logo {
            filter: invert(0.8);
        }

        .welcome-title {
            font-size: 2rem;
            font-weight: 400;
            margin: var(--spacing-xs) 0 0 0;
            color: var(--color-text);
        }

        .welcome-action-title {
            margin-bottom: 0;
        }

        .welcome-subtitle {
            font-size: 1rem;
            margin-bottom: 2rem;
            color: var(--color-secondary);
            max-width: 600px;
            line-height: 1.5;
        }

        .welcome-actions {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            max-width: 640px;
            width: 100%;
            margin: 1.5rem 0;
        }

        .welcome-actions-footer {
            max-width: 640px;
            width: 100%;
            display: flex;
            justify-content: flex-start;
            gap: 0.5rem;
            margin-top: -0.75rem;
        }

        .welcome-refresh-button {
            width: 38px;
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: 1px solid var(--color-border);
            border-radius: 10px;
            color: var(--color-primary);
            text-shadow: 0 0 5px rgba(0, 242, 254, 0.3);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .welcome-refresh-button:hover {
            /* background and border handled by dynamic hover styling if added, else fallback */
            background: var(--color-message-bg);
            color: var(--color-text);
        }

        .welcome-refresh-button:disabled {
            opacity: 0.6;
            cursor: default;
        }

        .welcome-refresh-button .material-symbols-outlined {
            font-size: 1.25rem;
        }

        .welcome-spin {
            animation: welcome-spin 0.9s linear infinite;
        }

        @keyframes welcome-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .welcome-action-card {
            background: var(--color-panel);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 0.6rem;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            justify-content: center;
            aspect-ratio: 1 / 1;
        }

        .welcome-action-card:hover {
            /* Handled dynamically via inline styles on hover */
        }

        .welcome-action-icon {
            font-size: 2.1rem;
            margin-bottom: 0.25rem;
            color: var(--color-highlight-dark);
            transition: all 0.3s ease;
        }

        .welcome-action-title {
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        /* Neon grid colors */
        .welcome-actions > .welcome-action-card:nth-child(1) .welcome-action-icon,
        .welcome-actions > .welcome-action-card:nth-child(1) .welcome-action-title { color: var(--color-primary); text-shadow: 0 0 8px rgba(0, 242, 254, 0.4); }
        .welcome-actions > .welcome-action-card:nth-child(2) .welcome-action-icon,
        .welcome-actions > .welcome-action-card:nth-child(2) .welcome-action-title { color: var(--color-accent); text-shadow: 0 0 8px rgba(255, 0, 127, 0.4); }
        .welcome-actions > .welcome-action-card:nth-child(3) .welcome-action-icon,
        .welcome-actions > .welcome-action-card:nth-child(3) .welcome-action-title { color: var(--color-highlight); text-shadow: 0 0 8px rgba(191, 0, 255, 0.4); }
        .welcome-actions > .welcome-action-card:nth-child(4) .welcome-action-icon,
        .welcome-actions > .welcome-action-card:nth-child(4) .welcome-action-title { color: var(--color-warning-text); text-shadow: 0 0 8px rgba(255, 184, 108, 0.4); }
        .welcome-actions > .welcome-action-card:nth-child(5) .welcome-action-icon,
        .welcome-actions > .welcome-action-card:nth-child(5) .welcome-action-title { color: #00ff9d; text-shadow: 0 0 8px rgba(0, 255, 157, 0.4); }
        .welcome-actions > .welcome-action-card:nth-child(6) .welcome-action-icon,
        .welcome-actions > .welcome-action-card:nth-child(6) .welcome-action-title { color: #ffd700; text-shadow: 0 0 8px rgba(255, 215, 0, 0.4); }
        .welcome-actions > .welcome-action-card:nth-child(7) .welcome-action-icon,
        .welcome-actions > .welcome-action-card:nth-child(7) .welcome-action-title { color: #3a86ff; text-shadow: 0 0 8px rgba(58, 134, 255, 0.4); }
        .welcome-actions > .welcome-action-card:nth-child(8) .welcome-action-icon,
        .welcome-actions > .welcome-action-card:nth-child(8) .welcome-action-title { color: var(--color-error-text); text-shadow: 0 0 8px rgba(255, 42, 95, 0.4); }

        .welcome-actions > .welcome-action-card:hover {
            /* hover effect handled dynamically */
        }

        /* Banner Styles */
        .welcome-banners {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            max-width: 680px;
            width: 100%;
            margin-top: 1.5rem;
        }

        .welcome-banner {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 14px 16px;
            background: var(--color-panel);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            text-align: left;
            position: relative;
            transition: all 0.2s ease;
        }

        .welcome-banner:hover {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        /* Banner Type Styles */
        .welcome-banner.banner-info {
            border-left: 4px solid #2196F3;
        }

        .welcome-banner.banner-warning {
            border-left: 4px solid #FF9800;
        }

        .welcome-banner.banner-error {
            border-left: 4px solid #F44336;
        }

        /* Banner Icon */
        .welcome-banner-icon {
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            margin-top: 2px;
        }

        .welcome-banner-icon .material-symbols-outlined {
            font-size: 1.25rem;
        }

        .banner-info .welcome-banner-icon {
            color: #2196F3;
        }

        .banner-warning .welcome-banner-icon {
            color: #FF9800;
        }

        .banner-error .welcome-banner-icon {
            color: #F44336;
        }

        /* Banner Content */
        .welcome-banner-content {
            flex: 1;
            min-width: 0;
        }

        .welcome-banner-title {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--color-text);
            margin-bottom: 4px;
            line-height: 1.3;
        }

        .welcome-banner-html {
            font-size: 0.85rem;
            color: var(--color-text-muted);
            line-height: 1.5;
        }

        .welcome-banner-html a {
            color: var(--color-primary);
            text-decoration: underline;
            cursor: pointer;
        }

        .welcome-banner-html a:hover {
            color: var(--color-highlight-dark);
        }

        .welcome-banner-html strong {
            color: var(--color-text);
            font-weight: 600;
        }

        /* Banner Dismiss Button */
        .welcome-banner-dismiss {
            flex-shrink: 0;
            background: transparent;
            border: none;
            border-radius: 4px;
            color: var(--color-secondary);
            cursor: pointer;
            padding: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            opacity: 0.6;
        }

        .welcome-banner-dismiss:hover {
            background: var(--color-border);
            color: var(--color-text);
            opacity: 1;
        }

        .welcome-banner-dismiss .material-symbols-outlined {
            font-size: 1.1rem;
        }

        /* Light mode adjustments */
        .light-mode .welcome-title {
            color: #2d2d2d;
        }

        .light-mode .welcome-subtitle {
            color: #666;
        }

        .light-mode .welcome-action-title {
            color: #2d2d2d;
        }

        .light-mode .welcome-action-description {
            color: #666;
        }

        .light-mode .welcome-footer {
            color: #666;
        }

        .light-mode .welcome-banner {
            background: var(--color-panel);
        }

        .light-mode .welcome-banner-title {
            color: var(--color-text);
        }

        .light-mode .welcome-banner-html {
            color: var(--color-primary);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .welcome-container {
                padding: 1rem;
                padding-top: 3rem;
            }

            .welcome-logo {
                width: 5rem;
                height: 5rem;
            }

            .welcome-logo-container {
                margin-top: 2rem;
            }

            .welcome-title {
                font-size: 1.5rem;
                margin: 0 !important;
            }

            .welcome-subtitle {
                font-size: 1rem;
                margin-top: var(--spacing-xs);
                margin-bottom: 0;
            }

            .welcome-actions {
                grid-template-columns: repeat(4, 1fr);
                gap: 0.75rem;
                margin-bottom: 1.5rem;
            }

            .welcome-action-card {
                aspect-ratio: 1 / 1;
                padding: 0.5rem;
            }

            .welcome-action-icon {
                font-size: 1.6rem;
            }

            .welcome-action-title {
                font-size: 0.85rem;
            }

            .welcome-banners {
                max-width: 100%;
            }

            .welcome-banner {
                padding: 12px 14px;
            }

            .welcome-banner-title {
                font-size: 0.85rem;
            }

            .welcome-banner-html {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 520px) {
            .welcome-actions {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .welcome-action-card {
                aspect-ratio: auto;
                padding: 0.5rem 0.75rem;
                flex-direction: row;
                justify-content: flex-start;
                align-items: center;
                text-align: left;
                border-radius: 10px;
                min-height: 44px;
            }

            .welcome-action-icon {
                margin-bottom: 0;
                margin-right: 0.5rem;
                font-size: 1.35rem;
                line-height: 1;
                display: flex;
                align-items: center;
            }

            .welcome-action-title {
                font-size: 0.95rem;
                margin: 0;
                line-height: 1.2;
            }
        }
    </style>
</body>

</html>
